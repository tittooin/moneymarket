function formatINR(n){return new Intl.NumberFormat("en-IN",{maximumFractionDigits:2}).format(n)}
function round2(n){return Math.round(n*100)/100}
function bindEMI(){var r=document.getElementById("emi-calculator");if(!r)return;var a=document.getElementById("loanAmount"),t=document.getElementById("annualRate"),e=document.getElementById("tenureMonths"),n=document.getElementById("emiResult"),o=document.getElementById("scheduleBody"),i=document.getElementById("calcBtn"),l=document.getElementById("resetBtn");function s(){var m=parseFloat(a.value||0),c=parseFloat(t.value||0)/12/100,d=parseInt(e.value||0,10);if(!m||!c||!d)return;n.innerHTML="";o.innerHTML="";var f=m*c*Math.pow(1+c,d)/(Math.pow(1+c,d)-1);var u=0;var p=m;for(var h=1;h<=d;h++){var g=p*c;var k=f-g;var y=p-k;u+=g;var tr=document.createElement("tr");var cols=[h,formatINR(round2(p)),formatINR(round2(g)),formatINR(round2(k)),formatINR(round2(y))];cols.forEach(function(val){var td=document.createElement("td");td.textContent=val;tr.appendChild(td)});o.appendChild(tr);p=y}
var total=f*d;var summary='<div class="card"><h3>Result</h3><p>EMI: ₹ '+formatINR(round2(f))+'</p><p>Total Interest: ₹ '+formatINR(round2(u))+'</p><p>Total Payment: ₹ '+formatINR(round2(total))+'</p><div class="result-affiliate"></div></div>';n.innerHTML=summary}
i.addEventListener("click",function(ev){ev.preventDefault();s()});l.addEventListener("click",function(ev){ev.preventDefault();a.value="";t.value="";e.value="";n.innerHTML="";o.innerHTML=""})}
function bindEligibility(){var r=document.getElementById("eligibility-calculator");if(!r)return;var i=document.getElementById("monthlyIncome"),o=document.getElementById("monthlyObligations"),a=document.getElementById("annualRate2"),t=document.getElementById("tenureYears"),e=document.getElementById("foir"),n=document.getElementById("eligibilityResult"),l=document.getElementById("calcBtn2"),s=document.getElementById("resetBtn2");function d(){var income=parseFloat(i.value||0),ob=parseFloat(o.value||0),rate=parseFloat(a.value||0)/12/100,years=parseInt(t.value||0,10),foir=parseFloat(e.value||40)/100;if(!income||!rate||!years)return;var nMonths=years*12;var emiAvail=(income-ob)*foir;if(emiAvail<=0){n.innerHTML='<div class="card"><h3>Result</h3><p>Eligible EMI: ₹ 0</p><p>Estimated Maximum Loan: ₹ 0</p><div class="result-affiliate"></div></div>';return}var pow=Math.pow(1+rate,nMonths);var principal=emiAvail*(pow-1)/(rate*pow);var summary='<div class="card"><h3>Result</h3><p>Eligible EMI: ₹ '+formatINR(round2(emiAvail))+'</p><p>Estimated Maximum Loan: ₹ '+formatINR(round2(principal))+'</p><p>Tenure: '+nMonths+' months</p><div class="result-affiliate"></div></div>';n.innerHTML=summary}
l.addEventListener("click",function(ev){ev.preventDefault();d()});s.addEventListener("click",function(ev){ev.preventDefault();i.value="";o.value="";a.value="";t.value="";e.value="40";n.innerHTML=""})}
function bindSIP(){var r=document.getElementById("sip-calculator");if(!r)return;var i=document.getElementById("sipAmount"),a=document.getElementById("sipRate"),t=document.getElementById("sipYears"),e=document.getElementById("sipResult"),n=document.getElementById("calcBtn3"),l=document.getElementById("resetBtn3");function s(){var p=parseFloat(i.value||0),ar=parseFloat(a.value||0)/12/100,y=parseInt(t.value||0,10);if(!p||!ar||!y)return;var nMonths=y*12;var fv=p*(Math.pow(1+ar,nMonths)-1)/ar*(1+ar);var invested=p*nMonths;var summary='<div class="card"><h3>Result</h3><p>Estimated Corpus: ₹ '+formatINR(round2(fv))+'</p><p>Total Invested: ₹ '+formatINR(round2(invested))+'</p><p>Estimated Gains: ₹ '+formatINR(round2(fv-invested))+'</p><div class="result-affiliate"></div></div>';e.innerHTML=summary}
n.addEventListener("click",function(ev){ev.preventDefault();s()});l.addEventListener("click",function(ev){ev.preventDefault();i.value="";a.value="";t.value="";e.innerHTML=""})}
function computeTaxNewRegime(taxable){var slabs=[[0,300000,0],[300000,600000,.05],[600000,900000,.10],[900000,1200000,.15],[1200000,1500000,.20],[1500000,Infinity,.30]];var tax=0;for(var s=0;s<slabs.length;s++){var l=slabs[s];var low=l[0],high=l[1],rate=l[2];if(taxable>low){var portion=Math.min(taxable,high)-low;if(portion>0)tax+=portion*rate}}
if(taxable<=700000)tax=0;return tax}
function computeTaxOldRegime(taxable){var slabs=[[0,250000,0],[250000,500000,.05],[500000,1000000,.20],[1000000,Infinity,.30]];var tax=0;for(var s=0;s<slabs.length;s++){var l=slabs[s];var low=l[0],high=l[1],rate=l[2];if(taxable>low){var portion=Math.min(taxable,high)-low;if(portion>0)tax+=portion*rate}}return tax}
function bindTax(){var r=document.getElementById("tax-calculator");if(!r)return;var i=document.getElementById("annualIncome"),a=document.getElementById("deductions"),t=document.getElementById("regime"),e=document.getElementById("taxResult"),n=document.getElementById("calcBtn4"),l=document.getElementById("resetBtn4");function s(){var income=parseFloat(i.value||0),ded=parseFloat(a.value||0),reg=t.value;var taxable=Math.max(0,income-ded);var tax=reg==="new"?computeTaxNewRegime(taxable):computeTaxOldRegime(taxable);var cess=tax*.04;var total=tax+cess;var summary='<div class="card"><h3>Result</h3><p>Taxable Income: ₹ '+formatINR(round2(taxable))+'</p><p>Income Tax: ₹ '+formatINR(round2(tax))+'</p><p>Health & Education Cess (4%): ₹ '+formatINR(round2(cess))+'</p><p>Total Tax Payable: ₹ '+formatINR(round2(total))+'</p><div class="result-affiliate"></div></div>';e.innerHTML=summary}
n.addEventListener("click",function(ev){ev.preventDefault();s()});l.addEventListener("click",function(ev){ev.preventDefault();i.value="";a.value="";t.value="new";e.innerHTML=""})}
function bindGST(){var r=document.getElementById("gst-calculator");if(!r)return;var i=document.getElementById("gstAmount"),a=document.getElementById("gstRate"),t=document.getElementById("gstMode"),e=document.getElementById("gstResult"),n=document.getElementById("calcBtn5"),l=document.getElementById("resetBtn5");function s(){var amt=parseFloat(i.value||0),rate=parseFloat(a.value||0)/100,mode=t.value;if(!amt||!rate)return;var base=0, gst=0,total=0;if(mode==="add"){gst=amt*rate;total=amt+gst;base=amt}else{base=amt/(1+rate);gst=amt-base;total=amt}
var summary='<div class="card"><h3>Result</h3><p>Base Amount: ₹ '+formatINR(round2(base))+'</p><p>GST: ₹ '+formatINR(round2(gst))+'</p><p>Total: ₹ '+formatINR(round2(total))+'</p><div class="result-affiliate"></div></div>';e.innerHTML=summary}
n.addEventListener("click",function(ev){ev.preventDefault();s()});l.addEventListener("click",function(ev){ev.preventDefault();i.value="";a.value="";t.value="add";e.innerHTML=""})}
function bindFDRD(){var r=document.getElementById("fd-rd-calculator");if(!r)return;var tab=document.getElementById("calcType"),res=document.getElementById("fdRdResult"),btn=document.getElementById("calcBtn6"),rst=document.getElementById("resetBtn6");function run(){var type=tab.value;if(type==="fd"){var p=parseFloat(document.getElementById("fdPrincipal").value||0);var rate=parseFloat(document.getElementById("fdRate").value||0)/12/100;var years=parseInt(document.getElementById("fdYears").value||0,10);if(!p||!rate||!years)return;var n=years*12;var mv=p*Math.pow(1+rate,n);var interest=mv-p;res.innerHTML='<div class="card"><h3>FD Result</h3><p>Maturity Value: ₹ '+formatINR(round2(mv))+'</p><p>Interest Earned: ₹ '+formatINR(round2(interest))+'</p><div class="result-affiliate"></div></div>'}else{var inst=parseFloat(document.getElementById("rdInstallment").value||0);var r=parseFloat(document.getElementById("rdRate").value||0)/12/100;var y=parseInt(document.getElementById("rdYears").value||0,10);if(!inst||!r||!y)return;var nMonths=y*12;var mv=inst*(Math.pow(1+r,nMonths)-1)/r*(1+r);var invested=inst*nMonths;res.innerHTML='<div class="card"><h3>RD Result</h3><p>Maturity Value: ₹ '+formatINR(round2(mv))+'</p><p>Total Deposited: ₹ '+formatINR(round2(invested))+'</p><p>Gain: ₹ '+formatINR(round2(mv-invested))+'</p><div class="result-affiliate"></div></div>'}}
btn.addEventListener("click",function(ev){ev.preventDefault();run()});rst.addEventListener("click",function(ev){ev.preventDefault();res.innerHTML="";document.querySelectorAll("#fd-rd-calculator input").forEach(function(el){el.value=""});tab.value="fd"})}
function bindCreditCardEMI(){var r=document.getElementById("cc-emi-calculator");if(!r)return;var a=document.getElementById("purchaseAmount"),t=document.getElementById("annualRate7"),e=document.getElementById("tenureMonths7"),n=document.getElementById("procFeePct"),o=document.getElementById("oneTimeFee"),i=document.getElementById("ccEmiResult"),l=document.getElementById("calcBtn7"),s=document.getElementById("resetBtn7");function d(){var amount=parseFloat(a.value||0),rate=parseFloat(t.value||0)/12/100,months=parseInt(e.value||0,10),feePct=parseFloat(n.value||0)/100,flatFee=parseFloat(o.value||0||0);if(!amount||!rate||!months)return;var fee=amount*feePct+flatFee;var emi=amount*rate*Math.pow(1+rate,months)/(Math.pow(1+rate,months)-1);var total=emi*months+fee;var interest=total-amount-fee;var summary='<div class="card"><h3>Result</h3><p>EMI: ₹ '+formatINR(round2(emi))+'</p><p>Total Interest: ₹ '+formatINR(round2(interest))+'</p><p>Processing Fees: ₹ '+formatINR(round2(fee))+'</p><p>Total Cost: ₹ '+formatINR(round2(total))+'</p><div class="result-affiliate"></div></div>';i.innerHTML=summary}
l.addEventListener("click",function(ev){ev.preventDefault();d()});s.addEventListener("click",function(ev){ev.preventDefault();a.value="";t.value="";e.value="";n.value="";o.value="";i.innerHTML=""})}
document.addEventListener("DOMContentLoaded",function(){bindEMI();bindEligibility();bindSIP();bindTax();bindGST();bindFDRD();bindCreditCardEMI()})
